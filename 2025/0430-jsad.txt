链接：http://fun.biugames.com/vip741544.html 寻找页面广告
dmFyIHRyeVRpbWUgPSAzOwpmdW5jdGlvbiBiKGMpIHsKICAgIHZhciBkID0gY1twYXJzZUludChNYXRoLnJhbmRvbSgpICogYy5sZW5ndGgpXTsKICAgIGlmICghZCkgewogICAgICAgIHJldHVybiBudWxsCiAgICB9CiAgICB2YXIgZSA9IGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICBpZiAoIWUpIHsKICAgICAgICByZXR1cm4gbnVsbAogICAgfQogICAgdmFyIHggPSBlLmxlZnQgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBkLm9mZnNldFdpZHRoKTsKICAgIHZhciB5ID0gZS50b3AgKyB3aW5kb3cuc2Nyb2xsWSArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGQub2Zmc2V0SGVpZ2h0KTsKICAgIHJldHVybiB7CiAgICAgICAgeCwKICAgICAgICB5CiAgICB9Cn0KZnVuY3Rpb24gZ2V0QWRzKCkgewoJY29uc3QgcmVzdWx0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGBpZnJhbWVbaWRePSJhc3dpZnRfIl1gKSkKICAgIGYgPSBiKHJlc3VsdCk7CgkJY29uc29sZS5sb2coJ3Jlc3VsdD09PicscmVzdWx0KQoJCWNvbnNvbGUubG9nKCdmPT0+JyxmKQogICAgaWYgKCFmIHx8IChyZXN1bHQubGVuZ3RoIDw9IDApKSB7CiAgICAgICAgaWYgKC0tdHJ5VGltZSA8PSAwKSB7CiAgICAgICAgICAgIEpTQmVoYXZpb3IuanNSZXN1bHQoJzQnLCAnJykKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzZXRUaW1lb3V0KCgpPT57CiAgICAgICAgICAgICAgICBnZXRBZHMoKQogICAgICAgICAgICB9CiAgICAgICAgICAgICwgMjAwMCkKICAgICAgICB9CiAgICB9IGVsc2UgewogICAgICBKU0JlaGF2aW9yLmpzUmVzdWx0KCczJywgJycpCiAgICB9Cn0KZ2V0QWRzKCk=
点击页面广告
dmFyIHRyeVRpbWUgPSAzOwpmdW5jdGlvbiBiKGMpIHsKICAgIHZhciBkID0gY1twYXJzZUludChNYXRoLnJhbmRvbSgpICogYy5sZW5ndGgpXTsKICAgIGlmICghZCkgewogICAgICAgIHJldHVybiBudWxsCiAgICB9CiAgICB2YXIgZSA9IGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICBpZiAoIWUpIHsKICAgICAgICByZXR1cm4gbnVsbAogICAgfQogICAgdmFyIHggPSBlLmxlZnQgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBkLm9mZnNldFdpZHRoKTsKICAgIHZhciB5ID0gZS50b3AgKyB3aW5kb3cuc2Nyb2xsWSArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGQub2Zmc2V0SGVpZ2h0KTsKICAgIHJldHVybiB7CiAgICAgICAgeCwKICAgICAgICB5CiAgICB9Cn0KZnVuY3Rpb24gZ2V0QWRzKCkgewoJY29uc3QgcmVzdWx0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGBpZnJhbWVbaWRePSJhc3dpZnRfIl1gKSkKICAgIGYgPSBiKHJlc3VsdCk7CgkJY29uc29sZS5sb2coJ3Jlc3VsdD09PicscmVzdWx0KQoJCWNvbnNvbGUubG9nKCdmPT0+JyxmKQogICAgIGlmICghZiB8fCAocmVzdWx0Lmxlbmd0aCA8PSAwKSkgewoJCQkJSlNCZWhhdmlvci5qc1Jlc3VsdCgnNycsICcnKQoJCQl9IGVsc2UgewoJCQkJCUpTQmVoYXZpb3IuanNSZXN1bHQoJzcnLCBgJHtmLnh9LCR7Zi55fWApCgkJCX0KfQpnZXRBZHMoKQ==
寻找插屏广告
dmFyIGluc0RvbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2luc1tjbGFzc149ImFkc2J5Z29vZ2xlIl1bdGFiaW5kZXg9IjAiXScpOwppZiAoaW5zRG9tICYmIGluc0RvbS5zdHlsZS5kaXNwbGF5ID09ICdibG9jaycpIHsKICAgIEpTQmVoYXZpb3IuanNSZXN1bHQoJzEnLCAnJyk7Cn0gZWxzZSB7CiBKU0JlaGF2aW9yLmpzUmVzdWx0KCcyJywgJycpCn0=
点击插屏广告
dmFyIGluc0RvbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2luc1tjbGFzc149ImFkc2J5Z29vZ2xlIl1bdGFiaW5kZXg9IjAiXScpOwppZiAoaW5zRG9tKSB7CiAgIHZhciBlID0gaW5zRG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwoJdmFyIHggPSBlLmxlZnQgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBpbnNEb20ub2Zmc2V0V2lkdGgpOwoJdmFyIHkgPSBlLnRvcCArIHdpbmRvdy5zY3JvbGxZICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogaW5zRG9tLm9mZnNldEhlaWdodCk7Y29uc29sZS5sb2coeCx5KQoJSlNCZWhhdmlvci5qc1Jlc3VsdCgnNScsIGAke3h9LCR7eX1gKTsKfWVsc2V7CglKU0JlaGF2aW9yLmpzUmVzdWx0KCc1JywgJycpOwp9
关闭插屏广告
dmFyIHNjcmVlblBvaW50ID0gY2xvc2UoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZGl2I2Rpc21pc3MtYnV0dG9uJykpOwpmdW5jdGlvbiBjbG9zZShjKSB7CiAgICBpZiAoIWMpIHJldHVybiBudWxsOwogICAgdmFyIGUgPSBjLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgdmFyIHggPSB3aW5kb3cuc2NyZWVuLndpZHRoICogLjg5ICsgZS5sZWZ0ICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogd2luZG93LnNjcmVlbi53aWR0aCAqIC4xKTsKICAgIHZhciB5ID0gd2luZG93LnNjcmVlbi5oZWlnaHQgKiAuMDEgKyBlLnRvcCArIHdpbmRvdy5zY3JvbGxZICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogd2luZG93LnNjcmVlbi5oZWlnaHQgKiAuMDMpOwogICAgcmV0dXJuIHsKICAgICAgICB4LAogICAgICAgIHkKICAgIH0KfQpmdW5jdGlvbiBzY3JlZW5DbG9zZSgpIHsKICB2YXIgeCA9IHdpbmRvdy5zY3JlZW4ud2lkdGggKiAuODggKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB3aW5kb3cuc2NyZWVuLndpZHRoICogLjEpOwogIHZhciB5ID0gd2luZG93LnNjcmVlbi5oZWlnaHQgKiAuMDEgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB3aW5kb3cuc2NyZWVuLmhlaWdodCAqIC4wMyk7CiAgcmV0dXJuIHt4LHl9Cn0KaWYgKCFzY3JlZW5Qb2ludCkgewogIGxldCBzID0gc2NyZWVuQ2xvc2UoKQogIGlmKHMpIHsKICAgIEpTQmVoYXZpb3IuanNSZXN1bHQoJzYnLCBgJHtzLnh9LCR7cy55fWApCiAgfSBlbHNlIHsKICAgIEpTQmVoYXZpb3IuanNSZXN1bHQoJzYnLCAnJykKICB9Cn0gZWxzZSB7CiAgICBKU0JlaGF2aW9yLmpzUmVzdWx0KCc2JywgYCR7c2NyZWVuUG9pbnQueH0sJHtzY3JlZW5Qb2ludC55fWApCn0=
进入二级页面
dmFyIGEgPSBbXTsKdmFyIGFyciA9IFsKCSdkaXYuZ2FtZUNhcmQnCl07CnZhciBmID0gbnVsbDsKZnVuY3Rpb24gc2VhcmNoMSgpIHsKICAgIGFyci5tYXAoaXRlbT0+ewogICAgICAgIGlmIChpdGVtLmluZGV4T2YoJ34nKSA9PSAwKSB7CiAgICAgICAgICAgIGxldCBhbGxJZnJhbWVEb20gPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpZnJhbWUnKSk7CiAgICAgICAgICAgIGlmIChhbGxJZnJhbWVEb20ubGVuZ3RoID09IDApCiAgICAgICAgICAgICAgICByZXR1cm4gW107CiAgICAgICAgICAgIGxldCBpZnJhbWVEb20gPSBbXTsKICAgICAgICAgICAgYWxsSWZyYW1lRG9tLm1hcChpdGVtPT57CiAgICAgICAgICAgICAgICBsZXQgaGFzSUQgPSBuZXcgUmVnRXhwKGl0ZW0uaWQuc2xpY2UoMSkpLnRlc3QoaXRlbS5pZCk7CiAgICAgICAgICAgICAgICBpZiAoaGFzSUQgJiYgaXRlbS5vZmZzZXRIZWlnaHQgIT0gMCkKICAgICAgICAgICAgICAgICAgICBpZnJhbWVEb20ucHVzaChpdGVtKQogICAgICAgICAgICB9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGEgPSBpZnJhbWVEb20KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsZXQgZG9tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChpdGVtKTsKICAgICAgICAgICAgaWYgKGRvbSAmJiBkb20ubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgbGV0IGxzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZG9tKTsKICAgICAgICAgICAgICAgIGEgPSBhLmNvbmNhdChscykKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgICkKfQpmdW5jdGlvbiBiKGMpIHsKICAgIGMgPSBjLmZpbHRlcihpID0+IHsKICAgICAgICBpZiAoaS5vZmZzZXRXaWR0aCA+IDAgJiYgaS5vZmZzZXRIZWlnaHQgPiAwKQogICAgICAgICAgICByZXR1cm4gaQogICAgfSkKICAgIHZhciBkID0gY1twYXJzZUludChNYXRoLnJhbmRvbSgpICogYy5sZW5ndGgpXTsKICAgIGlmICghZCkgewoJCQkKICAgICAgICByZXR1cm4gbnVsbAogICAgfQogICAgdmFyIGUgPSBkLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgaWYgKCFlKSB7CiAgICAgICAgcmV0dXJuIG51bGwKICAgIH0KICAgIHZhciB4ID0gZS5sZWZ0ICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZC5vZmZzZXRXaWR0aCk7CiAgICB2YXIgeSA9IGUudG9wICsgd2luZG93LnNjcm9sbFkgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBkLm9mZnNldEhlaWdodCk7CiAgICByZXR1cm4gewogICAgICAgIHgsCiAgICAgICAgeQogICAgfQp9CnNlYXJjaDEoKTsKZiA9IGIoYSk7CmlmICghZiB8fCAoYS5sZW5ndGggPD0gMCkpIHsKICAgIEpTQmVoYXZpb3IuanNSZXN1bHQoJzgnLCAnJykKfSBlbHNlIHsKICAgIEpTQmVoYXZpb3IuanNSZXN1bHQoJzgnLCBgJHtmLnh9LCR7Zi55fWApCn0=
广告页面点击
dmFyIGEgPSBbXTsKdmFyIGFyciA9IFsKCSdhJwpdOwp2YXIgZiA9IG51bGw7CmZ1bmN0aW9uIHNlYXJjaCgpIHsKICAgIGFyci5tYXAoaXRlbT0+ewogICAgICAgIGlmIChpdGVtLmluZGV4T2YoJ34nKSA9PSAwKSB7CiAgICAgICAgICAgIGxldCBhbGxJZnJhbWVEb20gPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpZnJhbWUnKSk7CiAgICAgICAgICAgIGlmIChhbGxJZnJhbWVEb20ubGVuZ3RoID09IDApCiAgICAgICAgICAgICAgICByZXR1cm4gW107CiAgICAgICAgICAgIGxldCBpZnJhbWVEb20gPSBbXTsKICAgICAgICAgICAgYWxsSWZyYW1lRG9tLm1hcChpdGVtPT57CiAgICAgICAgICAgICAgICBsZXQgaGFzSUQgPSBuZXcgUmVnRXhwKGl0ZW0uaWQuc2xpY2UoMSkpLnRlc3QoaXRlbS5pZCk7CiAgICAgICAgICAgICAgICBpZiAoaGFzSUQgJiYgaXRlbS5vZmZzZXRIZWlnaHQgIT0gMCkKICAgICAgICAgICAgICAgICAgICBpZnJhbWVEb20ucHVzaChpdGVtKQogICAgICAgICAgICB9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGEgPSBpZnJhbWVEb20KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsZXQgZG9tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChpdGVtKTsKICAgICAgICAgICAgaWYgKGRvbSAmJiBkb20ubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgbGV0IGxzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZG9tKTsKICAgICAgICAgICAgICAgIGEgPSBhLmNvbmNhdChscykKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgICkKfQpmdW5jdGlvbiBiKGMpIHsKICAgIHZhciBkID0gY1twYXJzZUludChNYXRoLnJhbmRvbSgpICogYy5sZW5ndGgpXTsKICAgIGlmICghZCkgewogICAgICAgIHJldHVybiBudWxsCiAgICB9CiAgICB2YXIgZSA9IGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICBpZiAoIWUpIHsKICAgICAgICByZXR1cm4gbnVsbAogICAgfQogICAgdmFyIHggPSBlLmxlZnQgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBkLm9mZnNldFdpZHRoKTsKICAgIHZhciB5ID0gZS50b3AgKyB3aW5kb3cuc2Nyb2xsWSArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGQub2Zmc2V0SGVpZ2h0KTsKICAgIHJldHVybiB7CiAgICAgICAgeCwKICAgICAgICB5CiAgICB9Cn0Kc2VhcmNoKCkKZiA9IGIoYSkKY29uc29sZS5sb2coZikKaWYgKCFmIHx8IChhLmxlbmd0aCA8PSAwKSkgewogICAgSlNCZWhhdmlvci5qc1Jlc3VsdCgnOScsICcnKQp9IGVsc2UgewogICAgSlNCZWhhdmlvci5qc1Jlc3VsdCgnOScsIGAke2YueH0sJHtmLnl9YCkKfQ==
