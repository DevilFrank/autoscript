链接：https://askdeep.top/tn/tnsearch.html?q={kw}

ZnVuY3Rpb24gcSh0YWcsIHR5cGUpIHsKICBsZXQgcmVzID0gbnVsbAogIGlmKHR5cGUgJiYgdHlwZSA9PSAnb25seScpIHsKICAgIHJlcyA9IHJhbmRvbUl0ZW0oQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0YWcpKSkKICB9IGVsc2UgewogICAgcmVzID0gdHlwZSA/IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGFnKSkgOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhZykKICB9CiAgcmV0dXJuIHtwb3M6KHR5cGUsdCkgPT4gewogICAgICBpZihBcnJheS5pc0FycmF5KHJlcykpIHsKICAgICAgICAgIHJhbmRvbVBvcyhyYW5kb21JdGVtKHJlcyksIHR5cGUsdCkKICAgICAgfSBlbHNlIHsKICAgICAgcmFuZG9tUG9zKHJlcywgdHlwZSx0KQogICAgICB9CiAgfX0KfQoKZnVuY3Rpb24gcmFuZG9tUG9zKGRvbSwgdHlwZSwgdCkgewogICAgaWYgKCFkb20pIHsKICAgICAgICBKU0JlaGF2aW9yLmpzUmVzdWx0KCcxJywgJycpCiAgICAgICAgcmV0dXJuCiAgICB9CiAgICBpZiAodCkgewogICAgICAgIGxldCBsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgbC5zdHlsZS53aWR0aCA9ICcxMDBweCc7CiAgICAgICAgbC5zdHlsZS5oZWlnaHQgPSAnMTAwcHgnOwogICAgICAgIGwuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnOwogICAgICAgIGwuc3R5bGUudG9wID0gMDsKICAgICAgICBsLnN0eWxlLmxlZnQgPSAwOwogICAgICAgIGwuY2xhc3NOYW1lID0gJ2hhb2RvdXlhMTIzNCc7CiAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKGwpCiAgICAgICAgZG9tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhhb2RvdXlhMTIzNCcpCiAgICB9CiAgICBpZih0eXBlKSB7CiAgICAgIGxldCBwb3MgPSBkb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkKICAgICAgdmFyIHkgPSAocG9zLnRvcCArIGRvbS5vZmZzZXRIZWlnaHQqMC40ICsgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCArIE1hdGgucmFuZG9tKCkgKiBkb20ub2Zmc2V0SGVpZ2h0KjAuMikKICAgICAgdmFyIHggPSAocG9zLmxlZnQgKyBkb20ub2Zmc2V0V2lkdGgqMC4zICsgTWF0aC5yYW5kb20oKSAqIGRvbS5vZmZzZXRXaWR0aCowLjQpOwogICAgICBKU0JlaGF2aW9yLmpzUmVzdWx0KCcxJywgeCArICcsJyArIHkpCiAgICAgIHJldHVybgogICAgfQogICAgbGV0IHBvcyA9IGRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKQogICAgdmFyIHkgPSAocG9zLnRvcCArIHBvcy5oZWlnaHQgKiAwLjEgKyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wICsgTWF0aC5yYW5kb20oKSAqIChwb3MuaGVpZ2h0IC0gcG9zLmhlaWdodCAqIDAuMikpCiAgICB2YXIgeCA9IChwb3MubGVmdCArIHBvcy53aWR0aCowLjEgKyBNYXRoLnJhbmRvbSgpICogKHBvcy53aWR0aCAtIHBvcy53aWR0aCAqIDAuMikpOwogICAgSlNCZWhhdmlvci5qc1Jlc3VsdCgnMScsIHggKyAnLCcgKyB5KQp9CmZ1bmN0aW9uIHJhbmRvbUl0ZW0obGlzdCwgZm4pIHsKCWxldCBfZm4gPSBmbiB8fCBmdW5jdGlvbihpKXtyZXR1cm4gaX0KICAgIGxldCBfbiA9IGxpc3QuZmlsdGVyKGk9PnsKICAgICAgICBpZiAoaS5vZmZzZXRXaWR0aCA+IDApCiAgICAgICAgICAgIHJldHVybiBpCiAgICB9KS5maWx0ZXIoX2ZuKQogICAgcmV0dXJuIF9uW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIF9uLmxlbmd0aCldCn0KCnEoJ2lmcmFtZVtkYXRhLXMxc2VhcmNoLWlkPSJtYWlubGluZS10b3AtIl0nLHRydWUpLnBvcyh0cnVlKQ==