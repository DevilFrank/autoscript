链接：https://yandex.ru/games/?utm_source=distrib&utm_medium=zuanzuan97&clid=11467629

寻找页面广告
dmFyIHRyeVRpbWUgPSAzOwpmdW5jdGlvbiBiKGMpIHsKICAgIHZhciBkID0gY1twYXJzZUludChNYXRoLnJhbmRvbSgpICogYy5sZW5ndGgpXTsKICAgIGlmICghZCkgewogICAgICAgIHJldHVybiBudWxsCiAgICB9CiAgICB2YXIgZSA9IGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICBpZiAoIWUpIHsKICAgICAgICByZXR1cm4gbnVsbAogICAgfQogICAgdmFyIHggPSBlLmxlZnQgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBkLm9mZnNldFdpZHRoKTsKICAgIHZhciB5ID0gZS50b3AgKyB3aW5kb3cuc2Nyb2xsWSArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGQub2Zmc2V0SGVpZ2h0KTsKICAgIHJldHVybiB7CiAgICAgICAgeCwKICAgICAgICB5CiAgICB9Cn0KZnVuY3Rpb24gZ2V0QWRzKCkgewoJY29uc3QgcmVzdWx0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGBkaXZbaWRePSJ5YW5kZXhfcnRiXyJdYCkpCiAgICBmID0gYihyZXN1bHQpOwoJCWNvbnNvbGUubG9nKCdyZXN1bHQ9PT4nLHJlc3VsdCkKCQljb25zb2xlLmxvZygnZj09PicsZikKICAgIGlmICghZiB8fCAocmVzdWx0Lmxlbmd0aCA8PSAwKSkgewogICAgICAgIGlmICgtLXRyeVRpbWUgPD0gMCkgewogICAgICAgICAgICBKU0JlaGF2aW9yLmpzUmVzdWx0KCc0JywgJycpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc2V0VGltZW91dCgoKT0+ewogICAgICAgICAgICAgICAgZ2V0QWRzKCkKICAgICAgICAgICAgfQogICAgICAgICAgICAsIDIwMDApCiAgICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgSlNCZWhhdmlvci5qc1Jlc3VsdCgnMycsICcnKQogICAgfQp9CmdldEFkcygp

点击页面广告
dmFyIHRyeVRpbWUgPSAzOwpmdW5jdGlvbiBiKGMpIHsKICAgIHZhciBkID0gY1twYXJzZUludChNYXRoLnJhbmRvbSgpICogYy5sZW5ndGgpXTsKICAgIGlmICghZCkgewogICAgICAgIHJldHVybiBudWxsCiAgICB9CiAgICB2YXIgZSA9IGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICBpZiAoIWUpIHsKICAgICAgICByZXR1cm4gbnVsbAogICAgfQogICAgdmFyIHggPSBlLmxlZnQgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBkLm9mZnNldFdpZHRoKTsKICAgIHZhciB5ID0gZS50b3AgKyB3aW5kb3cuc2Nyb2xsWSArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGQub2Zmc2V0SGVpZ2h0KTsKICAgIHJldHVybiB7CiAgICAgICAgeCwKICAgICAgICB5CiAgICB9Cn0KZnVuY3Rpb24gZ2V0QWRzKCkgewoJY29uc3QgcmVzdWx0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGBkaXZbaWRePSJ5YW5kZXhfcnRiXyJdYCkpCiAgICBmID0gYihyZXN1bHQpOwoJCWNvbnNvbGUubG9nKCdyZXN1bHQ9PT4nLHJlc3VsdCkKCQljb25zb2xlLmxvZygnZj09PicsZikKICAgICBpZiAoIWYgfHwgKHJlc3VsdC5sZW5ndGggPD0gMCkpIHsKCQkJCUpTQmVoYXZpb3IuanNSZXN1bHQoJzcnLCAnJykKCQkJfSBlbHNlIHsKCQkJCQlKU0JlaGF2aW9yLmpzUmVzdWx0KCc3JywgYCR7Zi54fSwke2YueX1gKQoJCQl9Cn0KZ2V0QWRzKCk=

寻找插屏广告
dmFyIGluc0RvbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2RpdltpZF49InlhbmRleF9ydGJfIl0gZGl2Lm5lZWRzY2xpY2snKTsKaWYgKGluc0RvbSAmJiBpbnNEb20uc3R5bGUuZGlzcGxheSA9PSAnYmxvY2snKSB7CiAgICBKU0JlaGF2aW9yLmpzUmVzdWx0KCcxJywgJycpOwp9IGVsc2UgewogSlNCZWhhdmlvci5qc1Jlc3VsdCgnMicsICcnKQp9

点击插屏广告
dmFyIGluc0RvbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2RpdltpZF49InlhbmRleF9ydGJfIl0gZGl2Lm5lZWRzY2xpY2snKTsKaWYgKGluc0RvbSkgewogICB2YXIgZSA9IGluc0RvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKCXZhciB4ID0gZS5sZWZ0ICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogaW5zRG9tLm9mZnNldFdpZHRoKTsKCXZhciB5ID0gZS50b3AgKyB3aW5kb3cuc2Nyb2xsWSArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGluc0RvbS5vZmZzZXRIZWlnaHQpO2NvbnNvbGUubG9nKHgseSkKCUpTQmVoYXZpb3IuanNSZXN1bHQoJzUnLCBgJHt4fSwke3l9YCk7Cn1lbHNlewoJSlNCZWhhdmlvci5qc1Jlc3VsdCgnNScsICcnKTsKfQ==

关闭插屏广告
dmFyIHNjcmVlblBvaW50ID0gY2xvc2UoZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc3Bhbi5jbG9zZS1idXR0b24nKSk7CmZ1bmN0aW9uIGNsb3NlKGMpIHsKICAgIGlmICghYykgcmV0dXJuIG51bGw7CiAgICB2YXIgZSA9IGMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICB2YXIgeCA9IHdpbmRvdy5zY3JlZW4ud2lkdGggKiAuODkgKyBlLmxlZnQgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB3aW5kb3cuc2NyZWVuLndpZHRoICogLjEpOwogICAgdmFyIHkgPSB3aW5kb3cuc2NyZWVuLmhlaWdodCAqIC4wMSArIGUudG9wICsgd2luZG93LnNjcm9sbFkgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB3aW5kb3cuc2NyZWVuLmhlaWdodCAqIC4wMyk7CiAgICByZXR1cm4gewogICAgICAgIHgsCiAgICAgICAgeQogICAgfQp9CmZ1bmN0aW9uIHNjcmVlbkNsb3NlKCkgewogIHZhciB4ID0gd2luZG93LnNjcmVlbi53aWR0aCAqIC44OCArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHdpbmRvdy5zY3JlZW4ud2lkdGggKiAuMSk7CiAgdmFyIHkgPSB3aW5kb3cuc2NyZWVuLmhlaWdodCAqIC4wMSArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHdpbmRvdy5zY3JlZW4uaGVpZ2h0ICogLjAzKTsKICByZXR1cm4ge3gseX0KfQppZiAoIXNjcmVlblBvaW50KSB7CiAgbGV0IHMgPSBzY3JlZW5DbG9zZSgpCiAgaWYocykgewogICAgSlNCZWhhdmlvci5qc1Jlc3VsdCgnNicsIGAke3MueH0sJHtzLnl9YCkKICB9IGVsc2UgewogICAgSlNCZWhhdmlvci5qc1Jlc3VsdCgnNicsICcnKQogIH0KfSBlbHNlIHsKICAgIEpTQmVoYXZpb3IuanNSZXN1bHQoJzYnLCBgJHtzY3JlZW5Qb2ludC54fSwke3NjcmVlblBvaW50Lnl9YCkKfQ==

进入二级页面
dmFyIGEgPSBbXTsKdmFyIGFyciA9IFsKCSdhLmdhbWUtdXJsJwpdOwp2YXIgZiA9IG51bGw7CmZ1bmN0aW9uIHNlYXJjaDEoKSB7CiAgICBhcnIubWFwKGl0ZW09PnsKICAgICAgICBpZiAoaXRlbS5pbmRleE9mKCd+JykgPT0gMCkgewogICAgICAgICAgICBsZXQgYWxsSWZyYW1lRG9tID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaWZyYW1lJykpOwogICAgICAgICAgICBpZiAoYWxsSWZyYW1lRG9tLmxlbmd0aCA9PSAwKQogICAgICAgICAgICAgICAgcmV0dXJuIFtdOwogICAgICAgICAgICBsZXQgaWZyYW1lRG9tID0gW107CiAgICAgICAgICAgIGFsbElmcmFtZURvbS5tYXAoaXRlbT0+ewogICAgICAgICAgICAgICAgbGV0IGhhc0lEID0gbmV3IFJlZ0V4cChpdGVtLmlkLnNsaWNlKDEpKS50ZXN0KGl0ZW0uaWQpOwogICAgICAgICAgICAgICAgaWYgKGhhc0lEICYmIGl0ZW0ub2Zmc2V0SGVpZ2h0ICE9IDApCiAgICAgICAgICAgICAgICAgICAgaWZyYW1lRG9tLnB1c2goaXRlbSkKICAgICAgICAgICAgfQogICAgICAgICAgICApOwogICAgICAgICAgICBhID0gaWZyYW1lRG9tCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbGV0IGRvbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoaXRlbSk7CiAgICAgICAgICAgIGlmIChkb20gJiYgZG9tLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGxldCBscyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvbSk7CiAgICAgICAgICAgICAgICBhID0gYS5jb25jYXQobHMpCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICApCn0KZnVuY3Rpb24gYihjKSB7CiAgICBjID0gYy5maWx0ZXIoaSA9PiB7CiAgICAgICAgaWYgKGkub2Zmc2V0V2lkdGggPiAwICYmIGkub2Zmc2V0SGVpZ2h0ID4gMCkKICAgICAgICAgICAgcmV0dXJuIGkKICAgIH0pCiAgICB2YXIgZCA9IGNbcGFyc2VJbnQoTWF0aC5yYW5kb20oKSAqIGMubGVuZ3RoKV07CiAgICBpZiAoIWQpIHsKCQkJCiAgICAgICAgcmV0dXJuIG51bGwKICAgIH0KICAgIHZhciBlID0gZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgIGlmICghZSkgewogICAgICAgIHJldHVybiBudWxsCiAgICB9CiAgICB2YXIgeCA9IGUubGVmdCArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGQub2Zmc2V0V2lkdGgpOwogICAgdmFyIHkgPSBlLnRvcCArIHdpbmRvdy5zY3JvbGxZICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogZC5vZmZzZXRIZWlnaHQpOwogICAgcmV0dXJuIHsKICAgICAgICB4LAogICAgICAgIHkKICAgIH0KfQpzZWFyY2gxKCk7CmYgPSBiKGEpOwppZiAoIWYgfHwgKGEubGVuZ3RoIDw9IDApKSB7CiAgICBKU0JlaGF2aW9yLmpzUmVzdWx0KCc4JywgJycpCn0gZWxzZSB7CiAgICBKU0JlaGF2aW9yLmpzUmVzdWx0KCc4JywgYCR7Zi54fSwke2YueX1gKQp9

广告页面点击
dmFyIGEgPSBbXTsKdmFyIGFyciA9IFsKCSdhJwpdOwp2YXIgZiA9IG51bGw7CmZ1bmN0aW9uIHNlYXJjaCgpIHsKICAgIGFyci5tYXAoaXRlbT0+ewogICAgICAgIGlmIChpdGVtLmluZGV4T2YoJ34nKSA9PSAwKSB7CiAgICAgICAgICAgIGxldCBhbGxJZnJhbWVEb20gPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpZnJhbWUnKSk7CiAgICAgICAgICAgIGlmIChhbGxJZnJhbWVEb20ubGVuZ3RoID09IDApCiAgICAgICAgICAgICAgICByZXR1cm4gW107CiAgICAgICAgICAgIGxldCBpZnJhbWVEb20gPSBbXTsKICAgICAgICAgICAgYWxsSWZyYW1lRG9tLm1hcChpdGVtPT57CiAgICAgICAgICAgICAgICBsZXQgaGFzSUQgPSBuZXcgUmVnRXhwKGl0ZW0uaWQuc2xpY2UoMSkpLnRlc3QoaXRlbS5pZCk7CiAgICAgICAgICAgICAgICBpZiAoaGFzSUQgJiYgaXRlbS5vZmZzZXRIZWlnaHQgIT0gMCkKICAgICAgICAgICAgICAgICAgICBpZnJhbWVEb20ucHVzaChpdGVtKQogICAgICAgICAgICB9CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGEgPSBpZnJhbWVEb20KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBsZXQgZG9tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChpdGVtKTsKICAgICAgICAgICAgaWYgKGRvbSAmJiBkb20ubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgbGV0IGxzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZG9tKTsKICAgICAgICAgICAgICAgIGEgPSBhLmNvbmNhdChscykKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgICkKfQpmdW5jdGlvbiBiKGMpIHsKICAgIHZhciBkID0gY1twYXJzZUludChNYXRoLnJhbmRvbSgpICogYy5sZW5ndGgpXTsKICAgIGlmICghZCkgewogICAgICAgIHJldHVybiBudWxsCiAgICB9CiAgICB2YXIgZSA9IGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICBpZiAoIWUpIHsKICAgICAgICByZXR1cm4gbnVsbAogICAgfQogICAgdmFyIHggPSBlLmxlZnQgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBkLm9mZnNldFdpZHRoKTsKICAgIHZhciB5ID0gZS50b3AgKyB3aW5kb3cuc2Nyb2xsWSArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGQub2Zmc2V0SGVpZ2h0KTsKICAgIHJldHVybiB7CiAgICAgICAgeCwKICAgICAgICB5CiAgICB9Cn0Kc2VhcmNoKCkKZiA9IGIoYSkKY29uc29sZS5sb2coZikKaWYgKCFmIHx8IChhLmxlbmd0aCA8PSAwKSkgewogICAgSlNCZWhhdmlvci5qc1Jlc3VsdCgnOScsICcnKQp9IGVsc2UgewogICAgSlNCZWhhdmlvci5qc1Jlc3VsdCgnOScsIGAke2YueH0sJHtmLnl9YCkKfQ==