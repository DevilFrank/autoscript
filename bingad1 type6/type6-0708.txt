bingad1 type6

链接：http://beatmobi.fuse-cloud.com/tl?a=2012&o=2352


ZnVuY3Rpb24gcSh0YWcsIHR5cGUpIHsKICBsZXQgcmVzID0gbnVsbAogIGlmKHR5cGUgJiYgdHlwZSA9PSAnb25seScpIHsKICAgIHJlcyA9IHJhbmRvbUl0ZW0oQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0YWcpKSkKICB9IGVsc2UgewogICAgcmVzID0gdHlwZSA/IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGFnKSkgOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhZykKICB9CiAgcmV0dXJuIHtwb3M6KHR5cGUpID0+IHsKICAgICAgaWYoQXJyYXkuaXNBcnJheShyZXMpKSB7CiAgICAgICAgICByYW5kb21Qb3MocmFuZG9tSXRlbShyZXMpLCB0eXBlKQogICAgICB9IGVsc2UgewogICAgICByYW5kb21Qb3MocmVzLCB0eXBlKQogICAgICB9CiAgfX0KfQpmdW5jdGlvbiBqdWRnZU9jYyhkb20pIHsKICAgIGlmKEludGVyc2VjdGlvbk9ic2VydmVyKSB7CiAgICAgICAgbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKChbY2hhbmdlXSkgPT4gewogICAgICAgICAgaWYoIWNoYW5nZS5pc1Zpc2libGUpIHsKICAgICAgICAgICAgICBKU0JlaGF2aW9yLmpzUmVzdWx0KCcyJywgJycpCiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAgdGhyZXNob2xkOiBbMS4wXSwKICAgICAgICAgIGRlbGF5OiAxMDAwLCAKICAgICAgICAgIHRyYWNrVmlzaWJpbGl0eTogdHJ1ZSwKICAgICAgICB9KS5vYnNlcnZlKGRvbSk7CiAgICB9Cn0KCmZ1bmN0aW9uIHJhbmRvbVBvcyhkb20sIHR5cGUpIHsKICAgIGlmICghZG9tKSB7CiAgICAgICAgSlNCZWhhdmlvci5qc1Jlc3VsdCgnMicsICcnKQogICAgICAgIHJldHVybgogICAgfQogICAganVkZ2VPY2MoZG9tKQogICAgaWYodHlwZSkgewogICAgICBsZXQgcG9zID0gZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpCiAgICAgIHZhciB5ID0gKHBvcy50b3AgKyBkb20ub2Zmc2V0SGVpZ2h0KjAuNCArIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgKyBNYXRoLnJhbmRvbSgpICogZG9tLm9mZnNldEhlaWdodCowLjIpCiAgICAgIHZhciB4ID0gKHBvcy5sZWZ0ICsgZG9tLm9mZnNldFdpZHRoKjAuMyArIE1hdGgucmFuZG9tKCkgKiBkb20ub2Zmc2V0V2lkdGgqMC40KTsKICAgICAgSlNCZWhhdmlvci5qc1Jlc3VsdCgnMicsIHggKyAnLCcgKyB5KQogICAgICByZXR1cm4KICAgIH0KICAgIGxldCBwb3MgPSBkb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkKICAgIHZhciB5ID0gKHBvcy50b3AgKyBwb3MuaGVpZ2h0ICogMC4xICsgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCArIE1hdGgucmFuZG9tKCkgKiAocG9zLmhlaWdodCAtIHBvcy5oZWlnaHQgKiAwLjIpKQogICAgdmFyIHggPSAocG9zLmxlZnQgKyBwb3Mud2lkdGgqMC4xICsgTWF0aC5yYW5kb20oKSAqIChwb3Mud2lkdGggLSBwb3Mud2lkdGggKiAwLjIpKTsKICAgIEpTQmVoYXZpb3IuanNSZXN1bHQoJzInLCB4ICsgJywnICsgeSkKfQpmdW5jdGlvbiByYW5kb21JdGVtKGxpc3QsIGZuKSB7CglsZXQgX2ZuID0gZm4gfHwgZnVuY3Rpb24oaSl7cmV0dXJuIGl9CiAgICBsZXQgX24gPSBsaXN0LmZpbHRlcihpPT57CiAgICAgICAgaWYgKGkub2Zmc2V0V2lkdGggPiAwKQogICAgICAgICAgICByZXR1cm4gaQogICAgfSkuZmlsdGVyKF9mbikKICAgIHJldHVybiBfbltNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBfbi5sZW5ndGgpXQp9CgpxKCdkaXYuY3RhLXdyYXAgYS5idG4nKS5wb3ModHJ1ZSk=