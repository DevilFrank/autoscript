链接：https://goodformp.com/

ZnVuY3Rpb24gcSh0YWcsIHR5cGUpIHsKICBsZXQgcmVzID0gbnVsbAogIGlmKHR5cGUgJiYgdHlwZSA9PSAnb25seScpIHsKICAgIHJlcyA9IHJhbmRvbUl0ZW0oQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0YWcpKSkKICB9IGVsc2UgewogICAgcmVzID0gdHlwZSA/IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGFnKSkgOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhZykKICB9CiAgcmV0dXJuIHtwb3M6KHR5cGUsdCkgPT4gewogICAgICBpZihBcnJheS5pc0FycmF5KHJlcykpIHsKICAgICAgICAgIHJhbmRvbVBvcyhyYW5kb21JdGVtKHJlcyksIHR5cGUsdCkKICAgICAgfSBlbHNlIHsKICAgICAgcmFuZG9tUG9zKHJlcywgdHlwZSx0KQogICAgICB9CiAgfX0KfQogICAKZnVuY3Rpb24gcmFuZG9tUG9zKGRvbSwgdHlwZSwgdCkge2NvbnNvbGUubG9nKCdkb20nLGRvbSkKICAgIGlmICghZG9tKSB7CiAgICAgICAgSlNCZWhhdmlvci5qc1Jlc3VsdCgnMicsICcnKQogICAgICAgIHJldHVybgogICAgfQogICAgaWYgKHQpIHsKICAgICAgICBsZXQgbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIGwuc3R5bGUud2lkdGggPSAnMTAwcHgnOwogICAgICAgIGwuc3R5bGUuaGVpZ2h0ID0gJzEwMHB4JzsKICAgICAgICBsLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJzsKICAgICAgICBsLnN0eWxlLnRvcCA9IDA7CiAgICAgICAgbC5zdHlsZS5sZWZ0ID0gMDsKICAgICAgICBsLmNsYXNzTmFtZSA9ICdoYW9kb3V5YTEyMzQnOwogICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZChsKQogICAgICAgIGRvbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oYW9kb3V5YTEyMzQnKQogICAgfQogICAgaWYodHlwZSkgewogICAgICBsZXQgcG9zID0gZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpCiAgICAgIHZhciB5ID0gKHBvcy50b3AgKyBkb20ub2Zmc2V0SGVpZ2h0KjAuNCArIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgKyBNYXRoLnJhbmRvbSgpICogZG9tLm9mZnNldEhlaWdodCowLjIpCiAgICAgIHZhciB4ID0gKHBvcy5sZWZ0ICsgZG9tLm9mZnNldFdpZHRoKjAuMyArIE1hdGgucmFuZG9tKCkgKiBkb20ub2Zmc2V0V2lkdGgqMC40KTsKICAgICAgSlNCZWhhdmlvci5qc1Jlc3VsdCgnMicsIHggKyAnLCcgKyB5KQogICAgICByZXR1cm4KICAgIH0KICAgIGxldCBwb3MgPSBkb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkKICAgIHZhciB5ID0gKHBvcy50b3AgKyBwb3MuaGVpZ2h0ICogMC4xICsgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCArIE1hdGgucmFuZG9tKCkgKiAocG9zLmhlaWdodCAtIHBvcy5oZWlnaHQgKiAwLjIpKQogICAgdmFyIHggPSAocG9zLmxlZnQgKyBwb3Mud2lkdGgqMC4xICsgTWF0aC5yYW5kb20oKSAqIChwb3Mud2lkdGggLSBwb3Mud2lkdGggKiAwLjIpKTsKICAgIEpTQmVoYXZpb3IuanNSZXN1bHQoJzInLCB4ICsgJywnICsgeSkKfQpmdW5jdGlvbiByYW5kb21JdGVtKGxpc3QsIGZuKSB7CiAgICBsZXQgX2ZuID0gZm4gfHwgZnVuY3Rpb24oaSl7cmV0dXJuIGl9CiAgICBsZXQgX24gPSBsaXN0LmZpbHRlcihpPT57CiAgICAgICAgaWYgKGkub2Zmc2V0V2lkdGggPiAwICYmIGkub2Zmc2V0SGVpZ2h0ID4gMCkKICAgICAgICAgICAgcmV0dXJuIGkKICAgIH0pLmZpbHRlcihfZm4pCiAgICByZXR1cm4gX25bTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogX24ubGVuZ3RoKV0KfQogICAKcSgnZGl2W2RhdGEtdHlwZT0iX21nd2lkZ2V0Il0nLHRydWUpLnBvcyh0cnVlKQ==